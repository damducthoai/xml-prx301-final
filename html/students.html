<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Management System</title>


</head>
<body>
    <table id="studenttable">
        <tr>
            <th>Code</th>
            <th>Name</th>
            <th>Class</th>
            <th>Age</th>
        </tr>
    </table>
</body>
<!--more info at: https://www.w3schools.com/xml/ajax_intro.asp-->
<script type="application/javascript">
    let url = 'http://localhost:8080/students';
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            let res = JSON.parse(this.response);
            res.forEach(function (student) {
                console.log(student);
                var x = document.createElement("tr");

                // td element
                var codeX = document.createElement("td");
                var nameX = document.createElement("td");
                var classX = document.createElement("td");
                var ageX = document.createElement("td");

                // text node info
                var codeNode = document.createTextNode(student.code);
                var nameNode = document.createTextNode(student.name);
                var classCodeNode = document.createTextNode(student.classCode);
                var ageNode = document.createTextNode(student.age);

                // binding data to td element
                codeX.appendChild(codeNode);
                nameX.appendChild(nameNode);
                classX.appendChild(classCodeNode);
                ageX.appendChild(ageNode);

                x.appendChild(codeNode);
                x.appendChild(nameX);
                x.appendChild(classX);
                x.appendChild(ageX);

                let table = document.getElementById("studenttable");

                table.appendChild(x);
            });
        }
    };
    xhttp.open("GET", url, true);
    xhttp.send();
</script>
</html>